name: 'Get Traffic Manager Staging Endpoint'
description: 'Returns the App Service backing the current active endpoint for the Traffic Manager Profile name supplied.'
inputs:
  tm-name:
    description: 'The Azure resource name of the Traffic Manager Profile to deploy to.'
    required: true
outputs:
  app-name:
    description: 'The Azure resource name of the App Service the active endpoint belonging staging Traffic Manager profile is pointing to.'
    value: ${{ steps.get-endpoint.outputs.app-name}}
runs:
  using: "composite"
  steps:
  - name: deploy
    shell: bash
    run: |
      ${{ github.action_path }}/get-endpoint.sh ${{ inputs.tm-name }}
      echo "::set-output name=APP_NAME::$TM_DEPLOYMENT_TARGET_APP_NAME"